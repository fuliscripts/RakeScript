-- Script Roblox Exploit con GUI para The Rake: Remastered
-- Por Fuli

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")

-- Variables de estado
local noclipEnabled = false
local ESPenabled = false
local stunAuraEnabled = false
local speed = 30

-- Función Anti-AFK
local function antiAFK()
    local vu = game:GetService("VirtualUser")
    LocalPlayer.Idled:Connect(function()
        vu:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
        wait(1)
        vu:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    end)
end

-- Noclip toggle
local function noclipToggle()
    noclipEnabled = not noclipEnabled
    if noclipEnabled then
        print("Noclip Activado")
        RunService.Stepped:Connect(function()
            if noclipEnabled and LocalPlayer.Character then
                for _, part in pairs(LocalPlayer.Character:GetChildren()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        print("Noclip Desactivado")
        if LocalPlayer.Character then
            for _, part in pairs(LocalPlayer.Character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

-- Walkspeed
local function setWalkspeed(value)
    speed = value
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = speed
    end
end

-- Fulbright
local function enableFulbright()
    Lighting.Ambient = Color3.new(1, 1, 1)
    Lighting.Brightness = 2
    Lighting.GlobalShadows = false
    Lighting.FogEnd = 1e10
end

-- Infinite stamina
local function infiniteStamina()
    RunService.Stepped:Connect(function()
        if LocalPlayer.Character then
            local stamina = LocalPlayer.Character:FindFirstChild("Stamina")
            if stamina then
                stamina.Value = stamina.MaxValue or 100
            end
        end
    end)
end

-- No fall damage
local function noFallDamage()
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown, false)
        humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall, false)
    end
end

-- Unlock chat
local function unlockChat()
    local Chat = game:GetService("Chat")
    Chat.ChatBarParentFrame.Visible = true
end

-- Teleport a posición
local function teleportTo(position)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(position)
    end
end

-- Kill Rake
local function killRake()
    for _, npc in pairs(workspace:GetChildren()) do
        if npc.Name:lower():find("rake") and npc:FindFirstChildOfClass("Humanoid") then
            npc.Humanoid.Health = 0
        end
    end
end

-- Stun Stick Aura toggle
local stunConnection
local function stunStickAuraToggle()
    stunAuraEnabled = not stunAuraEnabled
    if stunAuraEnabled then
        stunConnection = RunService.Stepped:Connect(function()
            for _, npc in pairs(workspace:GetChildren()) do
                if npc.Name:lower():find("rake") and npc:FindFirstChild("HumanoidRootPart") then
                    local dist = (npc.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                    if dist < 10 then
                        if npc:FindFirstChildOfClass("Humanoid") then
                            npc.Humanoid.PlatformStand = true
                        end
                    end
                end
            end
        end)
        print("Stun Stick Aura Activado")
    else
        if stunConnection then
            stunConnection:Disconnect()
            print("Stun Stick Aura Desactivado")
        end
    end
end

-- ESP básico
local espBoxes = {}

local function createESP(target, color)
    if espBoxes[target] then return end
    local box = Instance.new("BoxHandleAdornment")
    box.Adornee = target
    box.AlwaysOnTop = true
    box.ZIndex = 10
    box.Size = target.Size
    box.Color3 = color
    box.Transparency = 0.5
    box.Parent = target
    espBoxes[target] = box
end

local function removeESP()
    for target, box in pairs(espBoxes) do
        if box and box.Parent then
            box:Destroy()
        end
    end
    espBoxes = {}
end

local function toggleESP()
    ESPenabled = not ESPenabled
    if ESPenabled then
        for _, npc in pairs(workspace:GetChildren()) do
            if npc.Name:lower():find("rake") and npc:FindFirstChild("HumanoidRootPart") then
                createESP(npc.HumanoidRootPart, Color3.new(1, 0, 0))
            end
        end
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                createESP(player.Character.HumanoidRootPart, Color3.new(0, 1, 0))
            end
        end
        print("ESP Activado")
    else
        removeESP()
        print("ESP Desactivado")
    end
end

-- Crear GUI simple
local ScreenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
ScreenGui.Name = "FuliExploitMenu"

local function createButton(name, position, callback)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Text = name
    button.Size = UDim2.new(0, 150, 0, 30)
    button.Position = position
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    button.TextColor3 = Color3.new(1,1,1)
    button.BorderSizePixel = 0
    button.AutoButtonColor = true
    button.Parent = ScreenGui
    button.MouseButton1Click:Connect(callback)
    return button
end

-- Botones
createButton("Toggle Noclip", UDim2.new(0, 10, 0, 10), noclipToggle)
createButton("Kill Rake", UDim2.new(0, 10, 0, 50), killRake)
createButton("Toggle Stun Aura", UDim2.new(0, 10, 0, 90), stunStickAuraToggle)
createButton("Toggle ESP", UDim2.new(0, 10, 0, 130), toggleESP)

-- Slider simple para walkspeed (no es nativo, aquí hacemos un botón para +10 velocidad cada vez)
local walkspeedButton = createButton("Walkspeed +10", UDim2.new(0, 10, 0, 170), function()
    speed = speed + 10
    setWalkspeed(speed)
    print("Walkspeed: " .. speed)
end)

-- Ejecutar funciones iniciales
antiAFK()
enableFulbright()
infiniteStamina()
noFallDamage()
unlockChat()
setWalkspeed(speed)

-- Keybinds simples
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.N then
        noclipToggle()
    elseif input.KeyCode == Enum.KeyCode.T then
        -- Teleport a posición predeterminada (ejemplo)
        teleportTo(Vector3.new(100, 10, 100))
        print("Teleported to (100,10,100)")
    end
end)

print("Menu de exploit cargado. Usa botones o teclas (N = Noclip, T = Teleport)")
